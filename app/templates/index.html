<!-- app/templates/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Concrete Streangth AI Insight Platform</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h2>Concrete Strength Prediction</h2>

    <!-- Prediction Form -->
    <div class="card">
      <form method="post" action="/predict" class="grid-form">
        <input type="number" step="0.01" name="cement" placeholder="Cement" required>
        <input type="number" step="0.01" name="slag" placeholder="Slag" required>
        <input type="number" step="0.01" name="flyash" placeholder="Flyash" required>
        <input type="number" step="0.01" name="water" placeholder="Water" required>
        <input type="number" step="0.01" name="superplasticizer" placeholder="Superplasticizer" required>
        <input type="number" step="0.01" name="coarseaggregate" placeholder="Coarse Aggregate" required>
        <input type="number" step="0.01" name="fineaggregate" placeholder="Fine Aggregate" required>
        <input type="number" step="0.01" name="age" placeholder="Age (days)" required>
        <button type="submit">Predict Strength</button>
      </form>

      {% if result is not none %}
      <div class="result">
        <h3>Predicted Compressive Strength:</h3>
        <p><strong>{{ result }} MPa</strong></p>
      </div>
      {% endif %}
    </div>

    <!-- Supplier Recommendations -->
    {% if top_suppliers and top_suppliers|length > 0 %}
    <div class="card small">
      <h3>Top Supplier Recommendations</h3>
      <table class="styled-table">
        <thead>
          <tr>
            <th>Supplier ID</th>
            <th>Score</th>
            <th>Total Cost</th>
            <th>Delivery (days)</th>
            <th>Reliability</th>
          </tr>
        </thead>
        <tbody>
          {% for s in top_suppliers %}
          <tr>
            <td><strong>{{ s.supplier_id }}</strong></td>
            <td>{{ "%.4f"|format(s.score) }}</td>
            <td>{{ s.total_cost }}</td>
            <td>{{ s.delivery_time }}</td>
            <td>{{ s.reliability_score }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <a href="/optimize" class="btn-small">Refresh Recommendations</a>
    </div>
    {% endif %}

    <!-- Recent Predictions Table -->
    {% if recent and recent|length > 0 %}
    <div class="card">
      <h3>Recent Predictions</h3>
      <table class="styled-table">
        <thead>
          <tr>
            <th>Cement</th>
            <th>Water</th>
            <th>Age (days)</th>
            <th>Predicted (MPa)</th>
          </tr>
        </thead>
        <tbody>
          {% for r in recent %}
          <tr>
            <td>{{ "%.2f"|format(r.features.cement) }}</td>
            <td>{{ "%.2f"|format(r.features.water) }}</td>
            <td>{{ "%.0f"|format(r.features.age) }}</td>
            <td><strong>{{ "%.2f"|format(r.predicted_csMPa) }}</strong></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
</body>
</html>
